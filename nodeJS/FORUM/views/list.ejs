<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/main.css">
</head>

<!--
    ejsë¥¼ ì´ìš©í•œ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§
    1. ejs ì“°ë©´ html ì•ˆì—ì„œ ì„œë²„ë°ì´í„° ì‚¬ìš© ê°€ëŠ¥
    2. ejs íŒŒì¼ì€ views í´ë”ì•ˆì— ë§Œë“ ë‹¤.
    3. res.renderë¡œ ìœ ì €ì—ê²Œ í˜ì´ì§€ë¥¼ ë³´ë‚´ì¤€ë‹¤.
-->

<body class="grey-bg">
  <!-- include (ì¬ì‚¬ìš© ìš©ì´) -->
  <%- include('nav.ejs') %>

    <div class="white-bg">

      <% for(let i=0; i<value.length; i++){ %>
        <div class="list-box">
          <h4>
            <a href="/detail/<%= value[i]._id %>"><%= value[i].title %></a>
            <a href="/edit/<%= value[i]._id %>">âœï¸</a>
            <span class="delete" data-id="<%= value[i]._id %>">ğŸ—‘ï¸</span>
          </h4>
          <p><%= value[i].content %></p>
        </div>
      <% } %>

    </div> 
    <script>

      const deleteBtn = document.querySelectorAll('.delete');
      for(let i=0; i<deleteBtn.length; i++){
        deleteBtn[i].addEventListener('click', async (e) => {
          const targetId = e.target.dataset.id;
          await fetch(`/delete?id=${targetId}`, {
            method: 'DELETE'
          })
        });
      }

    </script>
  </body>
</html>